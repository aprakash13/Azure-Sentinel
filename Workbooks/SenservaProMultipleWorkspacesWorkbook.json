{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 1,
      "content": {
        "json": "## Using SenservaPro Across Multiple Log Analytics Workspaces\n---\n\nThis workbook helps serve as a guide for users who are using SenservaPro across multiple instances of SenservaPro. These users generally have multiple tenants or a geographical data location requirement. \nMore information can be found at https://docs.microsoft.com/en-us/azure/sentinel/extend-sentinel-across-workspaces-tenants\n\n\nTo create a unified view, you will need to select one workspace as the main conduit. In this conduit workspace, we recommend creating a saved Sentinel Function. This Function will access all your instances, to shorten your queries. \nMore information about Sentinel Functions can be found at https://docs.microsoft.com/en-us/azure/azure-monitor/logs/functions"
      },
      "name": "text - 2"
    },
    {
      "type": 1,
      "content": {
        "json": "As an example, to bring in data from a Workspace called 'LogAnalyticsSenservaTest', you would create the Sentinel function in the form of \r\n\r\n>union \r\n>(workspace(\"LogAnalyticsSenservaTest\").SenservaPro_CL), (SenservaPro_CL)\r\n\r\nThen save this with an alias of 'SenservaProUnionQuery'. Any query where you would use 'SenservaPro_CL' can then be updated to use 'SenservaProUnionQuery' to query all spaces at once.\r\n\r\n>SenservaProUnionQuery"
      },
      "name": "text - 2"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "union \r\n(workspace(\"LogAnalyticsSenservaMultipleSapce\").SenservaPro_CL), (SenservaPro_CL)\r\n| project ControlName_s, JSONData=parse_json(Value_s)",
        "size": 0,
        "title": "Example using Workspace Union Query",
        "timeContext": {
          "durationMs": 86400000
        },
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "name": "query - 3"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "SenservaProUnionQuery\n| project ControlName_s, JSONData=parse_json(Value_s)",
        "size": 1,
        "title": "Example using Sentinel Function",
        "timeContext": {
          "durationMs": 86400000
        },
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "name": "query - 2"
    }
  ],
  "styleSettings": {},
  "fromTemplateId": "sentinel-SenservaProMultipleWorkspacesWorkbook",
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}